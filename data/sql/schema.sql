CREATE TABLE app_var (id INT AUTO_INCREMENT, var_key VARCHAR(255) NOT NULL, var_value TEXT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE article_translation (id INT, title VARCHAR(255) NOT NULL, short_body TEXT, body TEXT, author VARCHAR(255), source TEXT, image VARCHAR(255), big_image VARCHAR(255), is_published TINYINT(1) DEFAULT '1' NOT NULL, lang CHAR(2), PRIMARY KEY(id, lang)) ENGINE = INNODB;
CREATE TABLE article (id INT AUTO_INCREMENT, popular TINYINT(1), position INT, viewed BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE banner_translation (id INT, image VARCHAR(255), link TEXT, title TEXT, body TEXT, is_published TINYINT(1) DEFAULT '1', lang CHAR(2), PRIMARY KEY(id, lang)) ENGINE = INNODB;
CREATE TABLE banner (id INT AUTO_INCREMENT, position INT DEFAULT 1 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE category_translation (id INT, title VARCHAR(255) NOT NULL, body TEXT, big_body TEXT, is_published TINYINT(1) DEFAULT '1' NOT NULL, lang CHAR(2), PRIMARY KEY(id, lang)) ENGINE = INNODB;
CREATE TABLE category (id INT AUTO_INCREMENT, parrent_id INT, icon VARCHAR(255), position INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE linking_product_category (id BIGINT AUTO_INCREMENT, product_id INT NOT NULL, category_id INT NOT NULL, INDEX product_id_idx (product_id), INDEX category_id_idx (category_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE linking_slider_category (id BIGINT AUTO_INCREMENT, slider_image_id INT NOT NULL, category_id INT NOT NULL, INDEX slider_image_id_idx (slider_image_id), INDEX category_id_idx (category_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE page_translation (id INT, title VARCHAR(255), image VARCHAR(255), body TEXT, links TEXT, partners TEXT, meta_title TEXT, meta_keywords TEXT, meta_description TEXT, is_published TINYINT(1) DEFAULT '1' NOT NULL, lang CHAR(2), PRIMARY KEY(id, lang)) ENGINE = INNODB;
CREATE TABLE page (id INT AUTO_INCREMENT, type INT DEFAULT 0 NOT NULL, position INT DEFAULT 1 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE product_translation (id INT, title VARCHAR(255) NOT NULL, body TEXT, image VARCHAR(255), big_image VARCHAR(255), is_published TINYINT(1) DEFAULT '1' NOT NULL, lang CHAR(2), PRIMARY KEY(id, lang)) ENGINE = INNODB;
CREATE TABLE product (id INT AUTO_INCREMENT, code VARCHAR(255), position INT, popular TINYINT(1), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE slider_image_translation (id INT, image VARCHAR(255) NOT NULL, link TEXT NOT NULL, is_published TINYINT(1) DEFAULT '1' NOT NULL, lang CHAR(2), PRIMARY KEY(id, lang)) ENGINE = INNODB;
CREATE TABLE slider_image (id INT AUTO_INCREMENT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user (id INT AUTO_INCREMENT, parent_id INT, email VARCHAR(255) NOT NULL UNIQUE, password VARCHAR(40) NOT NULL, remember_key VARCHAR(32), name VARCHAR(255) NOT NULL, role VARCHAR(255) DEFAULT 'user' NOT NULL, is_active TINYINT(1) DEFAULT '0' NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX parent_id_idx (parent_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE user_session (id INT AUTO_INCREMENT, user_id INT, name VARCHAR(255), ip VARCHAR(255), browser_info TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = MyISAM;
ALTER TABLE article_translation ADD CONSTRAINT article_translation_id_article_id FOREIGN KEY (id) REFERENCES article(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE banner_translation ADD CONSTRAINT banner_translation_id_banner_id FOREIGN KEY (id) REFERENCES banner(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE category_translation ADD CONSTRAINT category_translation_id_category_id FOREIGN KEY (id) REFERENCES category(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE linking_product_category ADD CONSTRAINT linking_product_category_product_id_product_id FOREIGN KEY (product_id) REFERENCES product(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE linking_product_category ADD CONSTRAINT linking_product_category_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE linking_slider_category ADD CONSTRAINT linking_slider_category_slider_image_id_slider_image_id FOREIGN KEY (slider_image_id) REFERENCES slider_image(id) ON DELETE CASCADE;
ALTER TABLE linking_slider_category ADD CONSTRAINT linking_slider_category_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id) ON DELETE CASCADE;
ALTER TABLE page_translation ADD CONSTRAINT page_translation_id_page_id FOREIGN KEY (id) REFERENCES page(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE product_translation ADD CONSTRAINT product_translation_id_product_id FOREIGN KEY (id) REFERENCES product(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE slider_image_translation ADD CONSTRAINT slider_image_translation_id_slider_image_id FOREIGN KEY (id) REFERENCES slider_image(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE user ADD CONSTRAINT user_parent_id_user_id FOREIGN KEY (parent_id) REFERENCES user(id) ON DELETE CASCADE;
